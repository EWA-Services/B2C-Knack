function searchTransactions(a){$(".transaction-item").each(function(){$(this).text().search(new RegExp(a,"i"))<0?$(this).hide():$(this).show()})}function resetSearchBar(){var a=$("#transaction-search-bar .search-input-cont"),s=$("#transaction-search-bar #clear");$(s).hasClass("hidden")||$(s).addClass("hidden"),$(a).removeClass("search-offset"),searchTransactions("")}function getStatusClass(a){switch(a){case"paid-out":return"status-payed";case"in-progress":return"status-pending";default:return"status-rejected"}}function setStatusIcon(a){switch(a){case"paid-out":return'<span class="material-icons status-icon status-payed">done</span>';case"in-progress":return'<span class="material-icons status-icon status-pending">hourglass_bottom</span>';default:return'<span class="material-icons status-icon status-error">do_not_disturb_on</span>'}}function parseTransactions(){var a=[];return $("#view_61 .kn-list-content .kn-list-item-container, #view_62 .kn-list-content .kn-list-item-container").each(function(){var s={};$(this).find(".kn-detail").each(function(){var a=$(this).attr("class").split(" "),t=$(this).find(".kn-detail-label span span").text(),n=a.find(a=>a.includes("field")),e=$(this).find(".kn-detail-body span span").text();"field_59"!==n&&"field_23"!==n&&"field_148"!==n||(e=$(this).find(".kn-detail-body span span span").text());var i="";"field_23"===n&&(i=$(this).find(".kn-detail-body span span span").attr("class"));var l="";"field_148"===n&&(l=$(this).find(".kn-detail-body span span span").attr("class")),s[n]={label:t,value:e,..."field_23"===n&&{class:i},..."field_148"===n&&{class:l}}});var t=$(this).find(".kn-details-link a").attr("href");s.edit=t,a.push(s)}),a}function formatDate(a){var s=a.split("/"),t=new Date(+s[2],s[1]-1,+s[0]),n=t.getFullYear();return`${t.toLocaleString("default",{month:"long"})} ${t.getDate()<10?"0"+t.getDate():t.getDate()}, ${n}`}function createDetailRows(a){var s="";for(const i in a)if("field_64"!==i&&"edit"!==i&&("field_148"!==i||"paid-out"==a.field_23.class)){var t=a[i].value;if("field_24"===i){var n=formatDate(t.substring(0,10)),e=t.substring(10,t.length);t=n.concat(" at",e)}s+=`\n            <div class="ti-content-row">\n                <span class="ti-row-label">\n                    ${a[i].label}\n                </span>\n\n                <span class="ti-row-value ${"field_23"===i&&getStatusClass(a[i].class)}">\n                    ${t||"-"}\n                </span>\n            </div>\n        `}return s}function createTransactionList(){var a=parseTransactions(),s=$(".transaction-list-container");void 0!==s&&a.forEach(a=>{var t=formatDate(a.field_24.value.substring(0,10)),n="collection-failed"==a.field_148.class&&"paid-out"==a.field_23.class?"":"display: none;",e="collection-failed-re"==a.field_148.class&&"paid-out"==a.field_23.class?"":"display: none;",i="not-paid"==a.field_148.class&&"paid-out"==a.field_23.class?"":"display: none;",l="overpaid"==a.field_148.class&&"paid-out"==a.field_23.class?"":"display: none;",c="paid"==a.field_148.class&&"paid-out"==a.field_23.class?"":"display: none;",r="partially-paid"==a.field_148.class&&"paid-out"==a.field_23.class?"":"display: none;",d=`\n                <div class="transaction-item ${getStatusClass(a.field_23.class)}">\n                    <div class="ti-header">\n                        <div class="ti-header-tgl">\n                            <span class="ti-withdrawal-date">${t}</span>\n                            <span class="btn-toggle material-icons">expand_more</span>\n                        </div>\n\n                        <div class="ti-header-amount">\n                            <span class="ti-amount">${a.field_18.value}</span>\n\n                            <a class="collection-failed" style="${n}">Collection Failed</a>\n                            <a class="collection-failed-re" style="${e}">Collection Failed</a>\n                            <a class="not-paid" style="${i}">Not Paid</a>\n                            <a class="overpaid" style="${l}">Overpaid</a>\n                            <a class="paid" style="${c}">Paid</a>\n                            <a class="partially-paid" style="${r}">Partially Paid</a>\n\n                            ${setStatusIcon(a.field_23.class)}\n                        </div>\n                    </div>\n\n                    <div class="ti-contnet hidden-detail">\n                        ${createDetailRows(a)}\n                    </div>\n                </div>`;s.append(d)})}function setupEventHandlers(){$(".transaction-item .btn-toggle").click(function(){var a=$(this).parents(".transaction-item");$(this).toggleClass("selected"),$(a).find(".ti-contnet").toggleClass("hidden-detail"),$("html, body").animate({scrollTop:$(a).offset().top+$(a).height()/3},1e3)}),$("#transaction-search-bar input").keyup(function(){var a=$(this).parents(".custom-search-bar"),s=$(a).find(".search-input-cont"),t=$(a).find("#clear"),n=$(this).val().trim();""!==n?($(t).removeClass("hidden"),$(s).hasClass("search-offset")||$(s).addClass("search-offset"),searchTransactions(n)):resetSearchBar()}),$("#transaction-search-bar #clear").click(function(){var a=$(this).parents(".custom-search-bar"),s=$(a).find("input.form-input");$(s).val(""),resetSearchBar()})}function loadCustomTrasactionView(){createTransactionList(),setupEventHandlers()}